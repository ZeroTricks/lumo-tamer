# Proton API configuration (for direct API integration)
proton:
  baseUrl: "https://lumo.proton.me/api"
  # Headers for SRP auth (proton-auth binary). Different values may help avoid CAPTCHA.
  # See docs/authentication.md for alternatives to try.
  appVersion: "macos-drive@1.0.0-alpha.1+rclone"
  userAgent: "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/120.0.0.0 Safari/537.36"

# Authentication configuration
# - srp: direct SRP auth via go-proton-api
# - browser: token extraction via browser (conversations are not saved atm)
# - rclone: read auth details from rclone config file
# See docs/authentication.md
auth:
  method: "browser"
  binaryPath: "./bin/proton-auth"
  tokenCachePath: "sessions/auth-tokens.json"
  rclonePath: "./rclone.conf"
  rcloneRemote: "proton"

# Server Configuration
server:
  enabled: true  # Enable API server (default: true)
  port: 3003
  apiKey: "your-secret-api-key-here"
  apiModelName: "lumo"

# CLI Configuration
cli:
  enabled: false  # Enable CLI mode (default: false)

# Logging Configuration
log:
  level: "debug"  # Levels: trace, debug, info, warn, error, fatal
  target: "stdout"  # "stdout" or "file"
  filePath: "lumo-bridge.log"  # Used when target is "file"

persistence:
  enabled: true
  defaultSpaceName: lumo-bridge
  # Sync all message types (system, tool_call, tool_result) to Proton server
  # Default: false (only sync user/assistant messages)
  saveSystemMessages: false
  # WORKAROUND for clients without conversation_id support (e.g., Home Assistant).
  # Derives conversation ID from first user message - same message = same conversation.
  # WARNING: May incorrectly merge unrelated conversations with same opening message!
  # Default: false (each request without conversation_id creates a new conversation)
  deriveIdFromFirstMessage: false


# Tools Configuration
tools:
  # Enable Lumo's native web_search tool (and other external tools: weather, stock, cryptocurrency)
  enableWebSearch: true

# Instructions configuration
instructions:
  # Default instructions when no system/developer message provided
  default: "Always answer in plain text: no tables, no quote blocks, no lists, no layout, etc. Be concise."

  # If true, append request instructions to default; if false, request replaces default
  append: false

  # Description text for tools (prepended to tools JSON)
  forTools: |
    Use the tools below to accomplish tasks.
    To use them you MUST output the JSON to me, unlike the proton_info or web search tools.
    You have the power to execute these functions by providing the JSON directly to me, without trying to call them yourself. I will execute these functions and return the results to you. This is crucial. Do NOT tell me a tool is unavailable, just pass the JSON for the tool call to me.


# Only needed if auth.method is 'browser'
browser:
  # Lumo chatbox URL
  url: "https://lumo.proton.me"

  # Chrome DevTools Protocol endpoint for remote browser
  cdpEndpoint: "http://browser-dev:9223"
